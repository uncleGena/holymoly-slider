!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.hmSlider=e():t.hmSlider=e()}(window,function(){return function(t){var e={};function i(s){if(e[s])return e[s].exports;var r=e[s]={i:s,l:!1,exports:{}};return t[s].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(s,r,function(e){return t[e]}.bind(null,r));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/dist/",i(i.s=0)}({0:function(t,e,i){"use strict";i.r(e);i(5);class s{constructor({dataName:t="hmSliderMin",dataValue:e,cssName:i,opositeCssName:s,element:r,sliderWidth:a,minMaxDiapazon:n,onStart:h=(()=>{}),onChangeStart:o=(()=>{}),onChange:d=(()=>{}),onChangeEnd:l=(()=>{}),updateIndicator:u=(()=>{}),step:g=null,formatNumber:c=!1,sign:m=!1}){this.dataName=t,this.dataValue=e,this.cssName=i,this.opositeCssName=s,this.triggerElem=r,this.sliderWidth=a,this.minMaxDiapazon=n,this.onStart=h,this.onChangeStart=o,this.onChange=d,this.onChangeEnd=l,this.step=g||n,this.updateIndicator=u,this.formatNumber=c,this.sign=m,this.triggerMinInit=parseInt(window.getComputedStyle(this.triggerElem)[i]),this.triggerMin=this.triggerMinInit,this.triggerElemWidth=parseInt(window.getComputedStyle(this.triggerElem).width),this.highlighted=this.triggerElem.classList.contains("trigger-active"),this.isTouchDevice=!1,this.clickCoord=null,this.moveValOld=null,this.cutSign=this.triggerElem.dataset.hmSliderCutSign||!1,this.inMoveState=!1,this.currentPixelVal=this.triggerMinInit,this.currentVisualVal=e,this.anotherTriggerWidth=null,this.anotherTriggerValue=null,this.onStart(this.dataToReturn()),this.triggerElem.addEventListener("mousedown",t=>{this.isTouchDevice=!1,this.eventStart(t)}),this.triggerElem.addEventListener("touchstart",t=>{this.isTouchDevice=!0,this.eventStart(t)}),document.addEventListener("mouseup",this.eventStop.bind(this)),document.addEventListener("touchend",this.eventStop.bind(this)),document.addEventListener("mousemove",this.eventMove.bind(this)),document.addEventListener("touchmove",this.eventMove.bind(this));const p=this.getVisualValueWithCutSign();this.updateVisualValue(p)}get sliderWidth(){return this.$sliderWidth}set sliderWidth(t){this.$sliderWidth=t,t<this.currentPixelVal&&(this.applyTriggerPosition(t-this.triggerElemWidth-this.anotherTriggerWidth),console.warn("Trigger moved outside of slider"))}get active(){return this.$active}set active(t){this.$active=t,this.toggleHighlightClass(this.active,this.isMoved())}get currentPixelVal(){return this.$currentPixelVal}set currentPixelVal(t){this.$currentPixelVal=t,this.applyTriggerPosition(t)}updateCurrentState(t){const e=this.triggerElemMaxAllow(),i=this.getExactMovedValue(this.triggerMinInit,t,e),s=this.sliderWidth-this.triggerElemWidth-this.anotherTriggerWidth;this.currentStep=this.getCurrentStep(i,this.step,s),this.currentPixelVal=this.getMagneticMovedValue(i,this.step,s),this.currentVisualVal=this.getVisualValue(this.minMaxDiapazon,this.step,this.currentStep)}resetToInitial(){return this.updateCurrentState(0),this.updateVisualValue(this.getVisualValueWithCutSign()),this.updateIndicator(this.dataToReturn()),this.eventStop(),new Promise(t=>{setTimeout(()=>{t(this.dataToReturn())},500)})}isMoved(){return this.currentPixelVal!==this.triggerMinInit}addHighlightedClass(){this.highlighted=!0,this.triggerElem.classList.add("trigger-highlighted")}removeHighlightedClass(){this.highlighted=!1,this.triggerElem.classList.remove("trigger-highlighted")}toggleHighlightClass(t,e){t||e?this.addHighlightedClass():this.removeHighlightedClass()}eventStart(t){this.clickCoord=this.evPageX(t,this.isTouchDevice),this.active=!0}eventStop(){this.active=!1;const t=this.triggerElem.style[this.cssName];this.triggerMin=parseInt(""===t?0:t),this.inMoveState=!1}get inMoveState(){return this.$inMoveState}set inMoveState(t){t&&this.$inMoveState!==t?this.onChangeStart(this.dataToReturn()):t||this.$inMoveState===t||void 0===this.$inMoveState||this.onChangeEnd(this.dataToReturn()),this.$inMoveState=t}eventMove(t){this.active&&this.moveTrigger(t)}evPageX(t,e){return e?t.changedTouches[0].clientX:t.clientX}movedCursorValue(t,e){return"left"===this.cssName?this.evPageX(t,this.isTouchDevice)-e:"right"===this.cssName?e-this.evPageX(t,this.isTouchDevice):void 0}getExactMovedValue(t,e,i){return e<=i?e>=t?e:t:i}getCurrentStep(t,e,i){return parseInt((t/(i/e)).toFixed(0))}getMagneticMovedValue(t,e,i){const s=i/e;return parseInt((t/s).toFixed(0))*s}getMinMaxCurrentStep(t,e,i,s){if("hmSliderMin"===this.dataName){return t-(e-i)*s+this.dataValue}if("hmSliderMax"===this.dataName){return t-i*s+(this.dataValue-t)}}getVisualValue(t,e,i){const s=t/parseInt(e);return this.getMinMaxCurrentStep(t,e,i,s)}updateVisualValue(t){this.triggerElem.innerHTML=t}triggerElemMaxAllow(){return this.sliderWidth-this.triggerElemWidth-this.anotherTriggerWidth-this.anotherTriggerValue}cutSignAddition(t,e,i,s=null){return t||(e&&i===s?e:"")}valueFormated(t){return t>9999999?(t/1e6).toFixed(0)+"m":t>999999?(t/1e6).toFixed(1)+"m":t>99999?(t/1e3).toFixed(0)+"k":t>9999?(t/1e3).toFixed(0)+"k":t>999?parseFloat((t/1e3).toFixed(1))+"k":t>99?t.toFixed(0):t>=10?t.toFixed(0):t>=1?t.toFixed(1):t>0?t.toFixed(2):0===t?t.toFixed(0):t}getVisualValueWithCutSign(){return(this.formatNumber?this.valueFormated(this.currentVisualVal):this.currentVisualVal.toFixed(0))+this.cutSignAddition(this.sign,this.cutSign,this.currentVisualVal,this.dataValue)}dataToReturn(){return{data:{cssName:this.cssName,opositeCssName:this.opositeCssName,value:this.currentVisualVal},ui:{width:this.triggerElemWidth,value:this.currentPixelVal}}}moveTrigger(t){const e=this.triggerMin+this.movedCursorValue(t,this.clickCoord);if(this.updateCurrentState(e),this.moveValOld!==this.currentPixelVal){this.inMoveState=!0,this.updateIndicator(this.dataToReturn());const e=this.dataToReturn();e.ev=t,this.onChange(e),this.updateVisualValue(this.getVisualValueWithCutSign()),this.moveValOld=this.currentPixelVal,this.applyTriggerPosition(this.currentPixelVal)}}applyTriggerPosition(t){this.triggerElem.style[this.cssName]=t+"px"}}class r{constructor({baseElement:t,side:e}){this.indicator=t.querySelector("[data-indicator]"),this.side=e,this.valueInit=parseInt(window.getComputedStyle(this.indicator)[e]),this.valueCurr=this.valueInit}get valueCurr(){return this.$valueCurr}set valueCurr(t){this.$valueCurr=t,this.indicator.style[this.side]=t+"px"}}class a{constructor({selector:t,formatNumber:e=!0,onInit:i=(()=>{}),onChangeStart:a=(()=>{}),onChange:n=(()=>{}),onChangeEnd:h=(()=>{})}={}){let o;this.selector=t,this.formatNumber=e,this.onInit=i,this.onChangeStart=a,this.onChange=n,this.onChangeEnd=h,this.triggersConfig=[{cssName:"left",opositeCssName:"right",dataName:"hmSliderMin"},{cssName:"right",opositeCssName:"left",dataName:"hmSliderMax"}],this.sliderStepName="hmSliderStep","string"==typeof t?this.sliderElem=document.querySelector(t):t instanceof HTMLElement?this.sliderElem=t:console.warn("Selector of slider should be string or HTMLElement"),this.dataSet=this.sliderElem.dataset,this.minMaxDiapazon=this.dataSet[this.triggersConfig[1].dataName]-this.dataSet[this.triggersConfig[0].dataName],this.step=parseInt(this.dataSet[this.sliderStepName]),this.triggers=this.triggersConfig.map(t=>new s(this.triggerPropsConfig(t))),this.indicatorSides=this.triggersConfig.map(t=>new r({baseElement:this.sliderElem,side:t.cssName})),this.sliderWidth=this.sliderElem.offsetWidth,window.addEventListener("resize",()=>{clearTimeout(o),o=setTimeout(()=>{this.sliderWidth=this.sliderElem.offsetWidth},50)},!1),this.onInit()}triggerPropsConfig(t){const{cssName:e,opositeCssName:i,dataName:s}=t;return{dataName:s,dataValue:parseInt(this.dataSet[s]),minMaxDiapazon:this.minMaxDiapazon,cssName:e,opositeCssName:i,element:this.sliderElem.querySelector(`[data-trigger="${e}"]`),sliderWidth:this.sliderWidth,step:this.step,formatNumber:this.formatNumber,sign:this.dataSet.hmSliderSign||!1,onStart:t=>{setTimeout(()=>{this.changeOppositeTriggerWidth(t.data,t.ui)})},onChangeStart:t=>{this.onChangeStart&&this.onChangeStart(this.returnDataSetup(t))},onChange:t=>{this.changeOppositeTriggerWidth(t.data,t.ui),this.onChange&&this.onChange(this.returnDataSetup(t))},onChangeEnd:t=>{this.onChangeEnd&&this.onChangeEnd(this.returnDataSetup(t))},updateIndicator:t=>{this.changeIndicatorSideValue(t.data,t.ui)}}}getActiveTriggerInd(t){return this.triggers.reduce((e,i,s)=>(i.cssName===t&&(e=s),e),-1)}returnDataSetup(t=!1){const e={slider:{dataSet:this.dataSet,elem:this.sliderElem},triggers:this.triggers.map(t=>({elem:t.triggerElem,cssName:t.cssName,dataName:t.dataName,initVal:t.dataValue,currVal:t.currentVisualVal,highlighted:t.highlighted}))};return t&&(e.activeTriggerInd=this.getActiveTriggerInd(t.data.cssName)),e}changeOppositeTriggerWidth(t,e){this.triggers.forEach(i=>{i.cssName===t.opositeCssName&&(i.anotherTriggerWidth=e.width,i.anotherTriggerValue=e.value)})}changeIndicatorSideValue(t,e){this.indicatorSides.forEach(i=>{i.side===t.cssName&&(i.valueCurr=e.value+e.width)})}get sliderWidth(){return this.$sliderWidth}set sliderWidth(t){this.$sliderWidth=t,this.updateTriggersSliderWidth(t)}updateTriggersSliderWidth(t){this.triggers.forEach(e=>{e.sliderWidth=t})}command(...t){if("reset"===t[0])return this.resetSlider()}resetSlider(){const t=this.triggers.map(t=>t.resetToInitial());return new Promise(e=>{Promise.all(t).then(t=>{e(this.returnDataSetup())})})}}function n(t){return new a(t)}i.d(e,"hmSlider",function(){return n})},5:function(t,e){}}).hmSlider});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9obVNsaWRlci93ZWJwYWNrL3VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24iLCJ3ZWJwYWNrOi8vaG1TbGlkZXIvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vaG1TbGlkZXIvLi9zcmMvZWxlbXMvVHJpZ2dlci5qcyIsIndlYnBhY2s6Ly9obVNsaWRlci8uL3NyYy9lbGVtcy9JbmRpY2F0b3JTaWRlLmpzIiwid2VicGFjazovL2htU2xpZGVyLy4vc3JjL2VsZW1zL1NsaWRlci5qcyIsIndlYnBhY2s6Ly9obVNsaWRlci8uL3NyYy9pbmRleC5qcyJdLCJuYW1lcyI6WyJyb290IiwiZmFjdG9yeSIsImV4cG9ydHMiLCJtb2R1bGUiLCJkZWZpbmUiLCJhbWQiLCJ3aW5kb3ciLCJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiVHJpZ2dlciIsImNvbnN0cnVjdG9yIiwiZGF0YU5hbWUiLCJkYXRhVmFsdWUiLCJjc3NOYW1lIiwib3Bvc2l0ZUNzc05hbWUiLCJlbGVtZW50Iiwic2xpZGVyV2lkdGgiLCJtaW5NYXhEaWFwYXpvbiIsIm9uU3RhcnQiLCJvbkNoYW5nZVN0YXJ0Iiwib25DaGFuZ2UiLCJvbkNoYW5nZUVuZCIsInVwZGF0ZUluZGljYXRvciIsInN0ZXAiLCJmb3JtYXROdW1iZXIiLCJzaWduIiwidGhpcyIsInRyaWdnZXJFbGVtIiwidHJpZ2dlck1pbkluaXQiLCJwYXJzZUludCIsImdldENvbXB1dGVkU3R5bGUiLCJ0cmlnZ2VyTWluIiwidHJpZ2dlckVsZW1XaWR0aCIsImhpZ2hsaWdodGVkIiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJpc1RvdWNoRGV2aWNlIiwiY2xpY2tDb29yZCIsIm1vdmVWYWxPbGQiLCJjdXRTaWduIiwiZGF0YXNldCIsImluTW92ZVN0YXRlIiwiY3VycmVudFBpeGVsVmFsIiwiY3VycmVudFZpc3VhbFZhbCIsImFub3RoZXJUcmlnZ2VyV2lkdGgiLCJhbm90aGVyVHJpZ2dlclZhbHVlIiwiZGF0YVRvUmV0dXJuIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2IiwiZXZlbnRTdGFydCIsImRvY3VtZW50IiwiZXZlbnRTdG9wIiwiZXZlbnRNb3ZlIiwidnVzdWFsVmFsV2l0aEN1dFNpZ24iLCJnZXRWaXN1YWxWYWx1ZVdpdGhDdXRTaWduIiwidXBkYXRlVmlzdWFsVmFsdWUiLCIkc2xpZGVyV2lkdGgiLCJ2YWwiLCJhcHBseVRyaWdnZXJQb3NpdGlvbiIsImNvbnNvbGUiLCJ3YXJuIiwiYWN0aXZlIiwiJGFjdGl2ZSIsInRvZ2dsZUhpZ2hsaWdodENsYXNzIiwiaXNNb3ZlZCIsIiRjdXJyZW50UGl4ZWxWYWwiLCJ1cGRhdGVDdXJyZW50U3RhdGUiLCJuZXdWYWwiLCJtYXhBbGxvdyIsInRyaWdnZXJFbGVtTWF4QWxsb3ciLCJtb3ZlVmFsIiwiZ2V0RXhhY3RNb3ZlZFZhbHVlIiwiZnVsbEluZGljYXRvcldpZHRoIiwiY3VycmVudFN0ZXAiLCJnZXRDdXJyZW50U3RlcCIsImdldE1hZ25ldGljTW92ZWRWYWx1ZSIsImdldFZpc3VhbFZhbHVlIiwicmVzZXRUb0luaXRpYWwiLCJQcm9taXNlIiwicmVzb2x2ZSIsInNldFRpbWVvdXQiLCJhZGRIaWdobGlnaHRlZENsYXNzIiwiYWRkIiwicmVtb3ZlSGlnaGxpZ2h0ZWRDbGFzcyIsInJlbW92ZSIsImV2UGFnZVgiLCJwYXJhbSIsInN0eWxlIiwiJGluTW92ZVN0YXRlIiwidW5kZWZpbmVkIiwibW92ZVRyaWdnZXIiLCJjaGFuZ2VkVG91Y2hlcyIsImNsaWVudFgiLCJtb3ZlZEN1cnNvclZhbHVlIiwibWluIiwibWF4IiwiY3VyclZhbCIsInRvRml4ZWQiLCJzdGVwVmFsIiwiZ2V0TWluTWF4Q3VycmVudFN0ZXAiLCJ0b3RhbFN0ZXBzIiwiY3VyclN0ZXAiLCJ2YWx1ZVBlclN0ZXAiLCJ2aXN1YWxWYWx1ZSIsImlubmVySFRNTCIsImN1dFNpZ25BZGRpdGlvbiIsImN1clZhbCIsImluaXRWYWwiLCJ2YWx1ZUZvcm1hdGVkIiwicGFyc2VGbG9hdCIsImRhdGEiLCJ1aSIsIndpZHRoIiwiSW5kaWNhdG9yU2lkZSIsImJhc2VFbGVtZW50Iiwic2lkZSIsImluZGljYXRvciIsInF1ZXJ5U2VsZWN0b3IiLCJ2YWx1ZUluaXQiLCJ2YWx1ZUN1cnIiLCIkdmFsdWVDdXJyIiwiU2xpZGVyX1NsaWRlciIsInNlbGVjdG9yIiwib25Jbml0IiwidGltZXIiLCJ0cmlnZ2Vyc0NvbmZpZyIsInNsaWRlclN0ZXBOYW1lIiwic2xpZGVyRWxlbSIsIkhUTUxFbGVtZW50IiwiZGF0YVNldCIsInRyaWdnZXJzIiwibWFwIiwidHJpZ2dlclByb3BzQ29uZmlnIiwiaW5kaWNhdG9yU2lkZXMiLCJvZmZzZXRXaWR0aCIsImNsZWFyVGltZW91dCIsInBhcmFtcyIsInByb3BzIiwiY2hhbmdlT3Bwb3NpdGVUcmlnZ2VyV2lkdGgiLCJyZXR1cm5EYXRhU2V0dXAiLCJjaGFuZ2VJbmRpY2F0b3JTaWRlVmFsdWUiLCJnZXRBY3RpdmVUcmlnZ2VySW5kIiwicmVkdWNlIiwiYWNjIiwiZWwiLCJpbmQiLCJzbGlkZXIiLCJlbGVtIiwidHIiLCJhY3RpdmVUcmlnZ2VySW5kIiwiZm9yRWFjaCIsInVwZGF0ZVRyaWdnZXJzU2xpZGVyV2lkdGgiLCJjb21tYW5kIiwicmVzZXRTbGlkZXIiLCJwcm1zcyIsInRyaWdnIiwiYWxsIiwidGhlbiIsInJlc3AiLCJobVNsaWRlciJdLCJtYXBwaW5ncyI6IkNBQUEsU0FBQUEs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UUFBUThFLElBQUlGLEdBQU9HLEtBQUtDLElBRXRCL0UsRUFBUXJELEtBQUtpSCx3QkM5S2QsU0FBU29CLEVBQVN0QixHQUV2QixPQUFPLElBQUloQixFQUFPZ0IiLCJmaWxlIjoiaG0tc2xpZGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoW10sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wiaG1TbGlkZXJcIl0gPSBmYWN0b3J5KCk7XG5cdGVsc2Vcblx0XHRyb290W1wiaG1TbGlkZXJcIl0gPSBmYWN0b3J5KCk7XG59KSh3aW5kb3csIGZ1bmN0aW9uKCkge1xucmV0dXJuICIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiL2Rpc3QvXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFRyaWdnZXIge1xuICBjb25zdHJ1Y3Rvcih7XG4gICAgZGF0YU5hbWUgPSAnaG1TbGlkZXJNaW4nLFxuICAgIGRhdGFWYWx1ZSxcbiAgICBjc3NOYW1lLFxuICAgIG9wb3NpdGVDc3NOYW1lLFxuICAgIGVsZW1lbnQsXG4gICAgc2xpZGVyV2lkdGgsXG4gICAgbWluTWF4RGlhcGF6b24sXG4gICAgb25TdGFydCA9ICgpID0+IHt9LFxuICAgIG9uQ2hhbmdlU3RhcnQgPSAoKSA9PiB7fSxcbiAgICBvbkNoYW5nZSA9ICgpID0+IHt9LFxuICAgIG9uQ2hhbmdlRW5kID0gKCkgPT4ge30sXG4gICAgdXBkYXRlSW5kaWNhdG9yID0gKCkgPT4ge30sXG4gICAgc3RlcCA9IG51bGwsXG4gICAgZm9ybWF0TnVtYmVyID0gZmFsc2UsXG4gICAgc2lnbiA9IGZhbHNlXG4gIH0pIHtcbiAgICB0aGlzLmRhdGFOYW1lID0gZGF0YU5hbWVcbiAgICB0aGlzLmRhdGFWYWx1ZSA9IGRhdGFWYWx1ZVxuICAgIHRoaXMuY3NzTmFtZSA9IGNzc05hbWVcbiAgICB0aGlzLm9wb3NpdGVDc3NOYW1lID0gb3Bvc2l0ZUNzc05hbWVcbiAgICB0aGlzLnRyaWdnZXJFbGVtID0gZWxlbWVudFxuICAgIHRoaXMuc2xpZGVyV2lkdGggPSBzbGlkZXJXaWR0aFxuICAgIHRoaXMubWluTWF4RGlhcGF6b24gPSBtaW5NYXhEaWFwYXpvblxuICAgIHRoaXMub25TdGFydCA9IG9uU3RhcnRcbiAgICB0aGlzLm9uQ2hhbmdlU3RhcnQgPSBvbkNoYW5nZVN0YXJ0XG4gICAgdGhpcy5vbkNoYW5nZSA9IG9uQ2hhbmdlXG4gICAgdGhpcy5vbkNoYW5nZUVuZCA9IG9uQ2hhbmdlRW5kXG4gICAgdGhpcy5zdGVwID0gc3RlcCA/IHN0ZXAgOiBtaW5NYXhEaWFwYXpvblxuICAgIHRoaXMudXBkYXRlSW5kaWNhdG9yID0gdXBkYXRlSW5kaWNhdG9yXG4gICAgdGhpcy5mb3JtYXROdW1iZXIgPSBmb3JtYXROdW1iZXJcbiAgICB0aGlzLnNpZ24gPSBzaWduXG5cbiAgICB0aGlzLnRyaWdnZXJNaW5Jbml0ID0gcGFyc2VJbnQod2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpcy50cmlnZ2VyRWxlbSlbY3NzTmFtZV0pXG4gICAgdGhpcy50cmlnZ2VyTWluID0gdGhpcy50cmlnZ2VyTWluSW5pdFxuICAgIC8vIHRoaXMudHJpZ2dlckVsZW1XaWR0aCA9IHRoaXMudHJpZ2dlckVsZW0ub2Zmc2V0V2lkdGhcbiAgICB0aGlzLnRyaWdnZXJFbGVtV2lkdGggPSBwYXJzZUludCh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLnRyaWdnZXJFbGVtKVsnd2lkdGgnXSlcbiAgICAvLyBjb25zb2xlLmxvZyh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLnRyaWdnZXJFbGVtKSlcblxuICAgIHRoaXMuaGlnaGxpZ2h0ZWQgPSB0aGlzLnRyaWdnZXJFbGVtLmNsYXNzTGlzdC5jb250YWlucygndHJpZ2dlci1hY3RpdmUnKSAvLyB0aHJvdWdoIGdldC9zZXRcbiAgICB0aGlzLmlzVG91Y2hEZXZpY2UgPSBmYWxzZVxuICAgIHRoaXMuY2xpY2tDb29yZCA9IG51bGxcbiAgICB0aGlzLm1vdmVWYWxPbGQgPSBudWxsXG4gICAgdGhpcy5jdXRTaWduID0gdGhpcy50cmlnZ2VyRWxlbS5kYXRhc2V0WydobVNsaWRlckN1dFNpZ24nXSB8fCBmYWxzZVxuICAgIHRoaXMuaW5Nb3ZlU3RhdGUgPSBmYWxzZVxuXG4gICAgdGhpcy5jdXJyZW50UGl4ZWxWYWwgPSB0aGlzLnRyaWdnZXJNaW5Jbml0XG4gICAgdGhpcy5jdXJyZW50VmlzdWFsVmFsID0gZGF0YVZhbHVlXG5cbiAgICB0aGlzLmFub3RoZXJUcmlnZ2VyV2lkdGggPSBudWxsXG4gICAgdGhpcy5hbm90aGVyVHJpZ2dlclZhbHVlID0gbnVsbFxuXG4gICAgdGhpcy5vblN0YXJ0KHRoaXMuZGF0YVRvUmV0dXJuKCkpXG5cbiAgICAvLyBFVkVOVFNcbiAgICB0aGlzLnRyaWdnZXJFbGVtLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIGV2ID0+IHtcbiAgICAgIHRoaXMuaXNUb3VjaERldmljZSA9IGZhbHNlXG4gICAgICB0aGlzLmV2ZW50U3RhcnQoZXYpXG4gICAgfSlcbiAgICB0aGlzLnRyaWdnZXJFbGVtLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBldiA9PiB7XG4gICAgICB0aGlzLmlzVG91Y2hEZXZpY2UgPSB0cnVlXG4gICAgICB0aGlzLmV2ZW50U3RhcnQoZXYpXG4gICAgfSlcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGhpcy5ldmVudFN0b3AuYmluZCh0aGlzKSlcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHRoaXMuZXZlbnRTdG9wLmJpbmQodGhpcykpXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5ldmVudE1vdmUuYmluZCh0aGlzKSlcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCB0aGlzLmV2ZW50TW92ZS5iaW5kKHRoaXMpKVxuXG4gICAgY29uc3QgdnVzdWFsVmFsV2l0aEN1dFNpZ24gPSB0aGlzLmdldFZpc3VhbFZhbHVlV2l0aEN1dFNpZ24oKVxuICAgIHRoaXMudXBkYXRlVmlzdWFsVmFsdWUodnVzdWFsVmFsV2l0aEN1dFNpZ24pXG4gIH1cblxuICAvLyBUIC0gbWVhbnMgdGVzdGVkXG4gIC8vIFAgLSBtZWFucyBwZW5kaW5nXG5cbiAgZ2V0IHNsaWRlcldpZHRoKCkge1xuICAgIHJldHVybiB0aGlzLiRzbGlkZXJXaWR0aFxuICB9XG5cbiAgc2V0IHNsaWRlcldpZHRoKHZhbCkge1xuICAgIHRoaXMuJHNsaWRlcldpZHRoID0gdmFsXG4gICAgaWYgKHZhbCA8IHRoaXMuY3VycmVudFBpeGVsVmFsKSB7XG4gICAgICB0aGlzLmFwcGx5VHJpZ2dlclBvc2l0aW9uKHZhbCAtIHRoaXMudHJpZ2dlckVsZW1XaWR0aCAtIHRoaXMuYW5vdGhlclRyaWdnZXJXaWR0aClcbiAgICAgIGNvbnNvbGUud2FybignVHJpZ2dlciBtb3ZlZCBvdXRzaWRlIG9mIHNsaWRlcicpXG4gICAgfVxuICB9XG5cbiAgZ2V0IGFjdGl2ZSgpIHtcbiAgICByZXR1cm4gdGhpcy4kYWN0aXZlXG4gIH1cbiAgc2V0IGFjdGl2ZSh2YWwpIHtcbiAgICB0aGlzLiRhY3RpdmUgPSB2YWxcbiAgICB0aGlzLnRvZ2dsZUhpZ2hsaWdodENsYXNzKHRoaXMuYWN0aXZlLCB0aGlzLmlzTW92ZWQoKSlcbiAgfVxuXG4gIGdldCBjdXJyZW50UGl4ZWxWYWwoKSB7XG4gICAgcmV0dXJuIHRoaXMuJGN1cnJlbnRQaXhlbFZhbFxuICB9XG4gIHNldCBjdXJyZW50UGl4ZWxWYWwodmFsKSB7XG4gICAgdGhpcy4kY3VycmVudFBpeGVsVmFsID0gdmFsXG4gICAgdGhpcy5hcHBseVRyaWdnZXJQb3NpdGlvbih2YWwpXG4gIH1cblxuICB1cGRhdGVDdXJyZW50U3RhdGUobmV3VmFsKSB7XG4gICAgY29uc3QgbWF4QWxsb3cgPSB0aGlzLnRyaWdnZXJFbGVtTWF4QWxsb3coKVxuICAgIGNvbnN0IG1vdmVWYWwgPSB0aGlzLmdldEV4YWN0TW92ZWRWYWx1ZSh0aGlzLnRyaWdnZXJNaW5Jbml0LCBuZXdWYWwsIG1heEFsbG93KVxuICAgIGNvbnN0IGZ1bGxJbmRpY2F0b3JXaWR0aCA9IHRoaXMuc2xpZGVyV2lkdGggLSB0aGlzLnRyaWdnZXJFbGVtV2lkdGggLSB0aGlzLmFub3RoZXJUcmlnZ2VyV2lkdGhcblxuICAgIHRoaXMuY3VycmVudFN0ZXAgPSB0aGlzLmdldEN1cnJlbnRTdGVwKG1vdmVWYWwsIHRoaXMuc3RlcCwgZnVsbEluZGljYXRvcldpZHRoKVxuICAgIHRoaXMuY3VycmVudFBpeGVsVmFsID0gdGhpcy5nZXRNYWduZXRpY01vdmVkVmFsdWUobW92ZVZhbCwgdGhpcy5zdGVwLCBmdWxsSW5kaWNhdG9yV2lkdGgpXG4gICAgdGhpcy5jdXJyZW50VmlzdWFsVmFsID0gdGhpcy5nZXRWaXN1YWxWYWx1ZSh0aGlzLm1pbk1heERpYXBhem9uLCB0aGlzLnN0ZXAsIHRoaXMuY3VycmVudFN0ZXApXG4gIH1cblxuICByZXNldFRvSW5pdGlhbCgpIHsgLy8gUFxuICAgIHRoaXMudXBkYXRlQ3VycmVudFN0YXRlKDApXG5cbiAgICAvLyB1cGRhdGUgdnVzdWFsIHZhbHVlXG4gICAgdGhpcy51cGRhdGVWaXN1YWxWYWx1ZSh0aGlzLmdldFZpc3VhbFZhbHVlV2l0aEN1dFNpZ24oKSlcblxuICAgIHRoaXMudXBkYXRlSW5kaWNhdG9yKHRoaXMuZGF0YVRvUmV0dXJuKCkpXG5cbiAgICB0aGlzLmV2ZW50U3RvcCgpXG5cbiAgICAvLyBUT0RPOiBjcmVhdGUgYW5pbWF0aW9uIGZvciB0cmlnZ2Vyc1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICByZXNvbHZlKHRoaXMuZGF0YVRvUmV0dXJuKCkpXG4gICAgICB9LCA1MDApXG4gICAgfSlcblxuICB9XG5cbiAgaXNNb3ZlZCgpIHsgLy8gVFxuICAgIHJldHVybiB0aGlzLmN1cnJlbnRQaXhlbFZhbCAhPT0gdGhpcy50cmlnZ2VyTWluSW5pdFxuICB9XG5cbiAgYWRkSGlnaGxpZ2h0ZWRDbGFzcygpIHsgLy8gVFxuICAgIHRoaXMuaGlnaGxpZ2h0ZWQgPSB0cnVlXG4gICAgdGhpcy50cmlnZ2VyRWxlbS5jbGFzc0xpc3QuYWRkKCd0cmlnZ2VyLWhpZ2hsaWdodGVkJylcbiAgfVxuXG4gIHJlbW92ZUhpZ2hsaWdodGVkQ2xhc3MoKSB7IC8vIFRcbiAgICB0aGlzLmhpZ2hsaWdodGVkID0gZmFsc2VcbiAgICB0aGlzLnRyaWdnZXJFbGVtLmNsYXNzTGlzdC5yZW1vdmUoJ3RyaWdnZXItaGlnaGxpZ2h0ZWQnKVxuICB9XG5cbiAgdG9nZ2xlSGlnaGxpZ2h0Q2xhc3MoYWN0aXZlLCBpc01vdmVkKSB7IC8vIFRcbiAgICBhY3RpdmUgfHwgaXNNb3ZlZCA/IHRoaXMuYWRkSGlnaGxpZ2h0ZWRDbGFzcygpIDogdGhpcy5yZW1vdmVIaWdobGlnaHRlZENsYXNzKClcbiAgfVxuXG4gIGV2ZW50U3RhcnQoZXYpIHsgLy8gVFxuICAgIHRoaXMuY2xpY2tDb29yZCA9IHRoaXMuZXZQYWdlWChldiwgdGhpcy5pc1RvdWNoRGV2aWNlKVxuICAgIHRoaXMuYWN0aXZlID0gdHJ1ZVxuICB9XG5cbiAgZXZlbnRTdG9wKCkgeyAvLyBUXG4gICAgdGhpcy5hY3RpdmUgPSBmYWxzZVxuICAgIGNvbnN0IHBhcmFtID0gdGhpcy50cmlnZ2VyRWxlbS5zdHlsZVt0aGlzLmNzc05hbWVdXG4gICAgdGhpcy50cmlnZ2VyTWluID0gcGFyc2VJbnQocGFyYW0gPT09ICcnID8gMCA6IHBhcmFtKVxuICAgIHRoaXMuaW5Nb3ZlU3RhdGUgPSBmYWxzZVxuICB9XG5cbiAgZ2V0IGluTW92ZVN0YXRlKCkge1xuICAgIHJldHVybiB0aGlzLiRpbk1vdmVTdGF0ZVxuICB9XG4gIHNldCBpbk1vdmVTdGF0ZSh2YWwpIHtcbiAgICBpZiAodmFsICYmIHRoaXMuJGluTW92ZVN0YXRlICE9PSB2YWwpIHtcbiAgICAgIHRoaXMub25DaGFuZ2VTdGFydCh0aGlzLmRhdGFUb1JldHVybigpKVxuICAgIH0gZWxzZSBpZiAoIXZhbCAmJiB0aGlzLiRpbk1vdmVTdGF0ZSAhPT0gdmFsICYmIHRoaXMuJGluTW92ZVN0YXRlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMub25DaGFuZ2VFbmQodGhpcy5kYXRhVG9SZXR1cm4oKSlcbiAgICB9XG4gICAgdGhpcy4kaW5Nb3ZlU3RhdGUgPSB2YWxcbiAgfVxuXG4gIGV2ZW50TW92ZShldikgeyAvLyBUXG4gICAgaWYgKHRoaXMuYWN0aXZlKSB7XG4gICAgICB0aGlzLm1vdmVUcmlnZ2VyKGV2KVxuICAgIH1cbiAgfVxuXG4gIGV2UGFnZVgoZXYsIGlzVG91Y2hEZXZpY2UpIHsgLy8gVFxuICAgIHJldHVybiBpc1RvdWNoRGV2aWNlID8gZXYuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WCA6IGV2LmNsaWVudFhcbiAgfVxuXG4gIG1vdmVkQ3Vyc29yVmFsdWUoZXYsIGNsaWNrQ29vcmQpIHsgLy8gVFxuICAgIC8vIGNvbnNvbGUud2Fybih0aGlzLmV2UGFnZVgoZXYsIHRoaXMuaXNUb3VjaERldmljZSkpXG4gICAgaWYgKHRoaXMuY3NzTmFtZSA9PT0gJ2xlZnQnKSB7XG4gICAgICByZXR1cm4gdGhpcy5ldlBhZ2VYKGV2LCB0aGlzLmlzVG91Y2hEZXZpY2UpIC0gY2xpY2tDb29yZFxuICAgIH0gZWxzZSBpZiAodGhpcy5jc3NOYW1lID09PSAncmlnaHQnKSB7XG4gICAgICByZXR1cm4gY2xpY2tDb29yZCAtIHRoaXMuZXZQYWdlWChldiwgdGhpcy5pc1RvdWNoRGV2aWNlKVxuICAgIH1cbiAgfVxuXG4gIGdldEV4YWN0TW92ZWRWYWx1ZShtaW4sIHZhbCwgbWF4KSB7IC8vIFRcbiAgICBpZiAodmFsIDw9IG1heCkge1xuICAgICAgaWYgKHZhbCA+PSBtaW4pIHtcbiAgICAgICAgcmV0dXJuIHZhbFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG1pblxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbWF4XG4gICAgfVxuICB9XG5cbiAgZ2V0Q3VycmVudFN0ZXAoY3VyclZhbCwgc3RlcCwgZnVsbEluZGljYXRvcldpZHRoKSB7IC8vIFRcbiAgICBjb25zdCBzdGVwVmFsID0gZnVsbEluZGljYXRvcldpZHRoIC8gc3RlcFxuICAgIGNvbnN0IGN1cnJlbnRTdGVwID0gcGFyc2VJbnQoKGN1cnJWYWwgLyBzdGVwVmFsKS50b0ZpeGVkKDApKVxuICAgIHJldHVybiBjdXJyZW50U3RlcFxuICB9XG5cbiAgZ2V0TWFnbmV0aWNNb3ZlZFZhbHVlKHZhbCwgc3RlcCwgZnVsbEluZGljYXRvcldpZHRoKSB7IC8vIFRcbiAgICBjb25zdCBzdGVwVmFsID0gZnVsbEluZGljYXRvcldpZHRoIC8gc3RlcFxuICAgIGNvbnN0IGN1cnJlbnRTdGVwID0gcGFyc2VJbnQoKHZhbCAvIHN0ZXBWYWwpLnRvRml4ZWQoMCkpXG4gICAgcmV0dXJuIGN1cnJlbnRTdGVwICogc3RlcFZhbFxuICB9XG5cbiAgZ2V0TWluTWF4Q3VycmVudFN0ZXAobWluTWF4RGlhcGF6b24sIHRvdGFsU3RlcHMsIGN1cnJTdGVwLCB2YWx1ZVBlclN0ZXApIHsgLy8gVFxuICAgIGlmICh0aGlzLmRhdGFOYW1lID09PSAnaG1TbGlkZXJNaW4nKSB7XG4gICAgICBjb25zdCB2YWwgPSAodG90YWxTdGVwcyAtIGN1cnJTdGVwKSAqIHZhbHVlUGVyU3RlcFxuICAgICAgY29uc3QgY3VyclN0ZXBWYWwgPSBtaW5NYXhEaWFwYXpvbiAtIHZhbCArIHRoaXMuZGF0YVZhbHVlXG4gICAgICByZXR1cm4gY3VyclN0ZXBWYWxcbiAgICB9IGVsc2UgaWYgKHRoaXMuZGF0YU5hbWUgPT09ICdobVNsaWRlck1heCcpIHtcbiAgICAgIGNvbnN0IHZhbCA9IGN1cnJTdGVwICogdmFsdWVQZXJTdGVwXG4gICAgICBjb25zdCBjdXJyU3RlcFZhbCA9IG1pbk1heERpYXBhem9uIC0gdmFsICsgKHRoaXMuZGF0YVZhbHVlIC0gbWluTWF4RGlhcGF6b24pXG4gICAgICByZXR1cm4gY3VyclN0ZXBWYWxcbiAgICB9XG4gIH1cblxuICBnZXRWaXN1YWxWYWx1ZShtaW5NYXhEaWFwYXpvbiwgdG90YWxTdGVwcywgY3VyclN0ZXApIHsgLy8gVFxuICAgIGNvbnN0IHZhbHVlUGVyU3RlcCA9IG1pbk1heERpYXBhem9uIC8gcGFyc2VJbnQodG90YWxTdGVwcylcbiAgICBjb25zdCBjdXJyZW50VmFsdWUgPSB0aGlzLmdldE1pbk1heEN1cnJlbnRTdGVwKG1pbk1heERpYXBhem9uLCB0b3RhbFN0ZXBzLCBjdXJyU3RlcCwgdmFsdWVQZXJTdGVwKVxuICAgIHJldHVybiBjdXJyZW50VmFsdWVcbiAgfVxuXG4gIHVwZGF0ZVZpc3VhbFZhbHVlKHZpc3VhbFZhbHVlKSB7IC8vIFRcbiAgICB0aGlzLnRyaWdnZXJFbGVtLmlubmVySFRNTCA9IHZpc3VhbFZhbHVlXG4gIH1cblxuICB0cmlnZ2VyRWxlbU1heEFsbG93KCkgeyAvLyBUXG4gICAgcmV0dXJuIHRoaXMuc2xpZGVyV2lkdGggLSB0aGlzLnRyaWdnZXJFbGVtV2lkdGggLSB0aGlzLmFub3RoZXJUcmlnZ2VyV2lkdGggLSB0aGlzLmFub3RoZXJUcmlnZ2VyVmFsdWVcbiAgfVxuXG4gIGN1dFNpZ25BZGRpdGlvbihzaWduLCBjdXRTaWduLCBjdXJWYWwsIGluaXRWYWwgPSBudWxsKSB7IC8vIFRcbiAgICBpZiAoIXNpZ24pIHtcbiAgICAgIHJldHVybiBjdXRTaWduICYmIGN1clZhbCA9PT0gaW5pdFZhbCA/IGN1dFNpZ24gOiAnJ1xuICAgIH0gZWxzZSByZXR1cm4gc2lnblxuICB9XG5cbiAgdmFsdWVGb3JtYXRlZChjdXJWYWwpIHsgLy8gVFxuICAgIGlmIChjdXJWYWwgPiA5OTk5OTk5KSB7XG4gICAgICByZXR1cm4gKGN1clZhbCAvIDEwMDAwMDApLnRvRml4ZWQoMCkgKyAnbSdcbiAgICB9XG4gICAgaWYgKGN1clZhbCA+IDk5OTk5OSkge1xuICAgICAgcmV0dXJuIChjdXJWYWwgLyAxMDAwMDAwKS50b0ZpeGVkKDEpICsgJ20nXG4gICAgfVxuICAgIGlmIChjdXJWYWwgPiA5OTk5OSkge1xuICAgICAgcmV0dXJuIChjdXJWYWwgLyAxMDAwKS50b0ZpeGVkKDApICsgJ2snXG4gICAgfVxuICAgIGlmIChjdXJWYWwgPiA5OTk5KSB7XG4gICAgICByZXR1cm4gKGN1clZhbCAvIDEwMDApLnRvRml4ZWQoMCkgKyAnaydcbiAgICB9XG4gICAgaWYgKGN1clZhbCA+IDk5OSkge1xuICAgICAgcmV0dXJuIHBhcnNlRmxvYXQoKGN1clZhbCAvIDEwMDApLnRvRml4ZWQoMSkpICsgJ2snXG4gICAgfVxuICAgIGlmIChjdXJWYWwgPiA5OSkge1xuICAgICAgcmV0dXJuIGN1clZhbC50b0ZpeGVkKDApXG4gICAgfVxuICAgIGlmIChjdXJWYWwgPj0gMTApIHtcbiAgICAgIHJldHVybiBjdXJWYWwudG9GaXhlZCgwKVxuICAgIH1cbiAgICBpZiAoY3VyVmFsID49IDEpIHtcbiAgICAgIHJldHVybiBjdXJWYWwudG9GaXhlZCgxKVxuICAgIH1cbiAgICBpZiAoY3VyVmFsID4gMCkge1xuICAgICAgcmV0dXJuIGN1clZhbC50b0ZpeGVkKDIpXG4gICAgfVxuICAgIGlmIChjdXJWYWwgPT09IDApIHtcbiAgICAgIHJldHVybiBjdXJWYWwudG9GaXhlZCgwKVxuICAgIH0gZWxzZSByZXR1cm4gY3VyVmFsXG4gIH1cblxuICBnZXRWaXN1YWxWYWx1ZVdpdGhDdXRTaWduKCkge1xuICAgIGNvbnN0IGZvcm1hdGVkVmFsdWUgPSB0aGlzLmZvcm1hdE51bWJlciA/IHRoaXMudmFsdWVGb3JtYXRlZCh0aGlzLmN1cnJlbnRWaXN1YWxWYWwpIDogdGhpcy5jdXJyZW50VmlzdWFsVmFsLnRvRml4ZWQoMClcbiAgICBjb25zdCBjdXR0ZWRTaWduID0gdGhpcy5jdXRTaWduQWRkaXRpb24odGhpcy5zaWduLCB0aGlzLmN1dFNpZ24sIHRoaXMuY3VycmVudFZpc3VhbFZhbCwgdGhpcy5kYXRhVmFsdWUpXG4gICAgY29uc3QgdmlzdWFsVmFsV2l0aEN1dFNpZ24gPSBmb3JtYXRlZFZhbHVlICsgY3V0dGVkU2lnblxuICAgIHJldHVybiB2aXN1YWxWYWxXaXRoQ3V0U2lnblxuICB9XG5cbiAgZGF0YVRvUmV0dXJuKCkge1xuICAgIHJldHVybiB7XG4gICAgICBkYXRhOiB7XG4gICAgICAgIGNzc05hbWU6IHRoaXMuY3NzTmFtZSxcbiAgICAgICAgb3Bvc2l0ZUNzc05hbWU6IHRoaXMub3Bvc2l0ZUNzc05hbWUsXG4gICAgICAgIHZhbHVlOiB0aGlzLmN1cnJlbnRWaXN1YWxWYWxcbiAgICAgIH0sXG4gICAgICB1aToge1xuICAgICAgICB3aWR0aDogdGhpcy50cmlnZ2VyRWxlbVdpZHRoLFxuICAgICAgICB2YWx1ZTogdGhpcy5jdXJyZW50UGl4ZWxWYWxcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBtb3ZlVHJpZ2dlcihldikge1xuICAgIGNvbnN0IG5ld1ZhbCA9IHRoaXMudHJpZ2dlck1pbiArIHRoaXMubW92ZWRDdXJzb3JWYWx1ZShldiwgdGhpcy5jbGlja0Nvb3JkKVxuICAgIHRoaXMudXBkYXRlQ3VycmVudFN0YXRlKG5ld1ZhbClcblxuICAgIC8vINC10YHQu9C4INC30L3QuNGH0LXQvdC40LUg0YDQtdCw0LvRjNC90L4g0LjQt9C80LXQvdC40LvQvtGB0YxcbiAgICBpZiAodGhpcy5tb3ZlVmFsT2xkICE9PSB0aGlzLmN1cnJlbnRQaXhlbFZhbCkge1xuICAgICAgdGhpcy5pbk1vdmVTdGF0ZSA9IHRydWVcblxuICAgICAgdGhpcy51cGRhdGVJbmRpY2F0b3IodGhpcy5kYXRhVG9SZXR1cm4oKSlcblxuICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YVRvUmV0dXJuKClcbiAgICAgIGRhdGEuZXYgPSBldlxuICAgICAgdGhpcy5vbkNoYW5nZShkYXRhKVxuXG4gICAgICB0aGlzLnVwZGF0ZVZpc3VhbFZhbHVlKHRoaXMuZ2V0VmlzdWFsVmFsdWVXaXRoQ3V0U2lnbigpKVxuICAgICAgdGhpcy5tb3ZlVmFsT2xkID0gdGhpcy5jdXJyZW50UGl4ZWxWYWxcbiAgICAgIHRoaXMuYXBwbHlUcmlnZ2VyUG9zaXRpb24odGhpcy5jdXJyZW50UGl4ZWxWYWwpXG4gICAgfVxuXG4gIH1cblxuICBhcHBseVRyaWdnZXJQb3NpdGlvbih2YWwpIHsgLy8gVFxuICAgIHRoaXMudHJpZ2dlckVsZW0uc3R5bGVbdGhpcy5jc3NOYW1lXSA9IHZhbCArICdweCdcbiAgfVxuXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgSW5kaWNhdG9yU2lkZSB7XG4gIGNvbnN0cnVjdG9yKHtcbiAgICBiYXNlRWxlbWVudCxcbiAgICBzaWRlLFxuICB9KSB7XG4gICAgdGhpcy5pbmRpY2F0b3IgPSBiYXNlRWxlbWVudC5xdWVyeVNlbGVjdG9yKGBbZGF0YS1pbmRpY2F0b3JdYClcbiAgICB0aGlzLnNpZGUgPSBzaWRlXG4gICAgdGhpcy52YWx1ZUluaXQgPSBwYXJzZUludCh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLmluZGljYXRvcilbc2lkZV0pXG4gICAgdGhpcy52YWx1ZUN1cnIgPSB0aGlzLnZhbHVlSW5pdFxuICB9XG5cbiAgZ2V0IHZhbHVlQ3VycigpIHtcbiAgICByZXR1cm4gdGhpcy4kdmFsdWVDdXJyXG4gIH1cblxuICBzZXQgdmFsdWVDdXJyKHZhbCkge1xuICAgIHRoaXMuJHZhbHVlQ3VyciA9IHZhbFxuICAgIHRoaXMuaW5kaWNhdG9yLnN0eWxlW3RoaXMuc2lkZV0gPSB2YWwgKyAncHgnXG4gIH1cblxufSIsImltcG9ydCBUcmlnZ2VyIGZyb20gJy4vVHJpZ2dlcidcbmltcG9ydCBJbmRpY2F0b3JTaWRlIGZyb20gJy4vSW5kaWNhdG9yU2lkZSc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNsaWRlciB7XG4gIGNvbnN0cnVjdG9yKHtcbiAgICBzZWxlY3RvcixcbiAgICBmb3JtYXROdW1iZXIgPSB0cnVlLFxuICAgIG9uSW5pdCA9ICgpID0+IHt9LFxuICAgIG9uQ2hhbmdlU3RhcnQgPSAoKSA9PiB7fSxcbiAgICBvbkNoYW5nZSA9ICgpID0+IHt9LFxuICAgIG9uQ2hhbmdlRW5kID0gKCkgPT4ge31cbiAgfSA9IHt9KSB7XG4gICAgdGhpcy5zZWxlY3RvciA9IHNlbGVjdG9yXG4gICAgdGhpcy5mb3JtYXROdW1iZXIgPSBmb3JtYXROdW1iZXJcbiAgICB0aGlzLm9uSW5pdCA9IG9uSW5pdFxuICAgIHRoaXMub25DaGFuZ2VTdGFydCA9IG9uQ2hhbmdlU3RhcnRcbiAgICB0aGlzLm9uQ2hhbmdlID0gb25DaGFuZ2VcbiAgICB0aGlzLm9uQ2hhbmdlRW5kID0gb25DaGFuZ2VFbmRcblxuICAgIHRoaXMudHJpZ2dlcnNDb25maWcgPSBbe1xuICAgICAgICBjc3NOYW1lOiAnbGVmdCcsXG4gICAgICAgIG9wb3NpdGVDc3NOYW1lOiAncmlnaHQnLFxuICAgICAgICBkYXRhTmFtZTogJ2htU2xpZGVyTWluJ1xuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgY3NzTmFtZTogJ3JpZ2h0JyxcbiAgICAgICAgb3Bvc2l0ZUNzc05hbWU6ICdsZWZ0JyxcbiAgICAgICAgZGF0YU5hbWU6ICdobVNsaWRlck1heCdcbiAgICAgIH1cbiAgICBdXG5cbiAgICB0aGlzLnNsaWRlclN0ZXBOYW1lID0gJ2htU2xpZGVyU3RlcCdcblxuICAgIGlmICh0eXBlb2Ygc2VsZWN0b3IgPT09ICdzdHJpbmcnKSB7XG4gICAgICB0aGlzLnNsaWRlckVsZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKVxuICAgIH0gZWxzZSBpZiAoc2VsZWN0b3IgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkge1xuICAgICAgdGhpcy5zbGlkZXJFbGVtID0gc2VsZWN0b3JcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS53YXJuKCdTZWxlY3RvciBvZiBzbGlkZXIgc2hvdWxkIGJlIHN0cmluZyBvciBIVE1MRWxlbWVudCcpXG4gICAgfVxuXG4gICAgdGhpcy5kYXRhU2V0ID0gdGhpcy5zbGlkZXJFbGVtLmRhdGFzZXRcbiAgICB0aGlzLm1pbk1heERpYXBhem9uID0gdGhpcy5kYXRhU2V0W3RoaXMudHJpZ2dlcnNDb25maWdbMV0uZGF0YU5hbWVdIC0gdGhpcy5kYXRhU2V0W3RoaXMudHJpZ2dlcnNDb25maWdbMF0uZGF0YU5hbWVdXG4gICAgdGhpcy5zdGVwID0gcGFyc2VJbnQodGhpcy5kYXRhU2V0W3RoaXMuc2xpZGVyU3RlcE5hbWVdKVxuXG4gICAgdGhpcy50cmlnZ2VycyA9IHRoaXMudHJpZ2dlcnNDb25maWcubWFwKG8gPT4ge1xuICAgICAgcmV0dXJuIG5ldyBUcmlnZ2VyKHRoaXMudHJpZ2dlclByb3BzQ29uZmlnKG8pKVxuICAgIH0pXG5cbiAgICB0aGlzLmluZGljYXRvclNpZGVzID0gdGhpcy50cmlnZ2Vyc0NvbmZpZy5tYXAobyA9PiB7XG4gICAgICByZXR1cm4gbmV3IEluZGljYXRvclNpZGUoe1xuICAgICAgICBiYXNlRWxlbWVudDogdGhpcy5zbGlkZXJFbGVtLFxuICAgICAgICBzaWRlOiBvLmNzc05hbWVcbiAgICAgIH0pXG4gICAgfSlcblxuICAgIHRoaXMuc2xpZGVyV2lkdGggPSB0aGlzLnNsaWRlckVsZW0ub2Zmc2V0V2lkdGhcblxuICAgIGxldCB0aW1lcjtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCAoKSA9PiB7XG4gICAgICBjbGVhclRpbWVvdXQodGltZXIpXG4gICAgICB0aW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0aGlzLnNsaWRlcldpZHRoID0gdGhpcy5zbGlkZXJFbGVtLm9mZnNldFdpZHRoXG4gICAgICB9LCA1MClcbiAgICB9LCBmYWxzZSk7XG5cbiAgICB0aGlzLm9uSW5pdCgpXG4gIH1cblxuICB0cmlnZ2VyUHJvcHNDb25maWcocGFyYW1zKSB7XG5cbiAgICBjb25zdCB7XG4gICAgICBjc3NOYW1lLFxuICAgICAgb3Bvc2l0ZUNzc05hbWUsXG4gICAgICBkYXRhTmFtZVxuICAgIH0gPSBwYXJhbXNcblxuICAgIHJldHVybiB7XG4gICAgICBkYXRhTmFtZTogZGF0YU5hbWUsXG4gICAgICBkYXRhVmFsdWU6IHBhcnNlSW50KHRoaXMuZGF0YVNldFtkYXRhTmFtZV0pLFxuICAgICAgbWluTWF4RGlhcGF6b246IHRoaXMubWluTWF4RGlhcGF6b24sXG4gICAgICBjc3NOYW1lLFxuICAgICAgb3Bvc2l0ZUNzc05hbWUsXG4gICAgICBlbGVtZW50OiB0aGlzLnNsaWRlckVsZW0ucXVlcnlTZWxlY3RvcihgW2RhdGEtdHJpZ2dlcj1cIiR7Y3NzTmFtZX1cIl1gKSxcbiAgICAgIHNsaWRlcldpZHRoOiB0aGlzLnNsaWRlcldpZHRoLFxuICAgICAgc3RlcDogdGhpcy5zdGVwLFxuICAgICAgZm9ybWF0TnVtYmVyOiB0aGlzLmZvcm1hdE51bWJlcixcbiAgICAgIHNpZ246IHRoaXMuZGF0YVNldFsnaG1TbGlkZXJTaWduJ10gfHwgZmFsc2UsXG4gICAgICBvblN0YXJ0OiAocHJvcHMpID0+IHtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgdGhpcy5jaGFuZ2VPcHBvc2l0ZVRyaWdnZXJXaWR0aChwcm9wcy5kYXRhLCBwcm9wcy51aSlcbiAgICAgICAgfSlcbiAgICAgIH0sXG4gICAgICBvbkNoYW5nZVN0YXJ0OiBwcm9wcyA9PiB7XG4gICAgICAgIHRoaXMub25DaGFuZ2VTdGFydCAmJiB0aGlzLm9uQ2hhbmdlU3RhcnQodGhpcy5yZXR1cm5EYXRhU2V0dXAocHJvcHMpKVxuICAgICAgfSxcbiAgICAgIG9uQ2hhbmdlOiBwcm9wcyA9PiB7XG4gICAgICAgIHRoaXMuY2hhbmdlT3Bwb3NpdGVUcmlnZ2VyV2lkdGgocHJvcHMuZGF0YSwgcHJvcHMudWkpXG4gICAgICAgIHRoaXMub25DaGFuZ2UgJiYgdGhpcy5vbkNoYW5nZSh0aGlzLnJldHVybkRhdGFTZXR1cChwcm9wcykpXG4gICAgICB9LFxuICAgICAgb25DaGFuZ2VFbmQ6IHByb3BzID0+IHtcbiAgICAgICAgdGhpcy5vbkNoYW5nZUVuZCAmJiB0aGlzLm9uQ2hhbmdlRW5kKHRoaXMucmV0dXJuRGF0YVNldHVwKHByb3BzKSlcbiAgICAgIH0sXG4gICAgICB1cGRhdGVJbmRpY2F0b3I6IChwcm9wcykgPT4ge1xuICAgICAgICB0aGlzLmNoYW5nZUluZGljYXRvclNpZGVWYWx1ZShwcm9wcy5kYXRhLCBwcm9wcy51aSlcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBnZXRBY3RpdmVUcmlnZ2VySW5kKG5hbWUpIHtcbiAgICByZXR1cm4gdGhpcy50cmlnZ2Vycy5yZWR1Y2UoKGFjYywgZWwsIGluZCkgPT4ge1xuICAgICAgaWYgKGVsLmNzc05hbWUgPT09IG5hbWUpIGFjYyA9IGluZDtcbiAgICAgIHJldHVybiBhY2NcbiAgICB9LCAtMSlcbiAgfVxuXG4gIHJldHVybkRhdGFTZXR1cChwYXJhbXMgPSBmYWxzZSkge1xuICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICBzbGlkZXI6IHtcbiAgICAgICAgZGF0YVNldDogdGhpcy5kYXRhU2V0LFxuICAgICAgICBlbGVtOiB0aGlzLnNsaWRlckVsZW1cbiAgICAgIH0sXG4gICAgICB0cmlnZ2VyczogdGhpcy50cmlnZ2Vycy5tYXAodHIgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGVsZW06IHRyLnRyaWdnZXJFbGVtLFxuICAgICAgICAgIGNzc05hbWU6IHRyLmNzc05hbWUsXG4gICAgICAgICAgZGF0YU5hbWU6IHRyLmRhdGFOYW1lLFxuICAgICAgICAgIGluaXRWYWw6IHRyLmRhdGFWYWx1ZSxcbiAgICAgICAgICBjdXJyVmFsOiB0ci5jdXJyZW50VmlzdWFsVmFsLFxuICAgICAgICAgIGhpZ2hsaWdodGVkOiB0ci5oaWdobGlnaHRlZFxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cbiAgICBpZiAocGFyYW1zKSBkYXRhLmFjdGl2ZVRyaWdnZXJJbmQgPSB0aGlzLmdldEFjdGl2ZVRyaWdnZXJJbmQocGFyYW1zLmRhdGEuY3NzTmFtZSlcbiAgICByZXR1cm4gZGF0YVxuICB9XG5cbiAgY2hhbmdlT3Bwb3NpdGVUcmlnZ2VyV2lkdGgoZGF0YSwgdWkpIHsgLy8gVFxuICAgIHRoaXMudHJpZ2dlcnMuZm9yRWFjaChvID0+IHtcbiAgICAgIGlmIChvLmNzc05hbWUgPT09IGRhdGEub3Bvc2l0ZUNzc05hbWUpIHtcbiAgICAgICAgby5hbm90aGVyVHJpZ2dlcldpZHRoID0gdWkud2lkdGhcbiAgICAgICAgby5hbm90aGVyVHJpZ2dlclZhbHVlID0gdWkudmFsdWVcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgY2hhbmdlSW5kaWNhdG9yU2lkZVZhbHVlKGRhdGEsIHVpKSB7IC8vIFRcbiAgICB0aGlzLmluZGljYXRvclNpZGVzLmZvckVhY2gobyA9PiB7XG4gICAgICBpZiAoby5zaWRlID09PSBkYXRhLmNzc05hbWUpIG8udmFsdWVDdXJyID0gdWkudmFsdWUgKyB1aS53aWR0aFxuICAgIH0pXG4gIH1cblxuICBnZXQgc2xpZGVyV2lkdGgoKSB7XG4gICAgcmV0dXJuIHRoaXMuJHNsaWRlcldpZHRoXG4gIH1cbiAgc2V0IHNsaWRlcldpZHRoKHZhbCkge1xuICAgIHRoaXMuJHNsaWRlcldpZHRoID0gdmFsXG4gICAgdGhpcy51cGRhdGVUcmlnZ2Vyc1NsaWRlcldpZHRoKHZhbClcbiAgfVxuXG4gIHVwZGF0ZVRyaWdnZXJzU2xpZGVyV2lkdGgodmFsKSB7IC8vIFBcbiAgICB0aGlzLnRyaWdnZXJzLmZvckVhY2gobyA9PiB7XG4gICAgICBvLnNsaWRlcldpZHRoID0gdmFsXG4gICAgfSlcbiAgfVxuXG4gIGNvbW1hbmQoLi4ucGFyYW0pIHtcbiAgICBpZiAocGFyYW1bMF0gPT09ICdyZXNldCcpIHJldHVybiB0aGlzLnJlc2V0U2xpZGVyKClcbiAgfVxuXG4gIHJlc2V0U2xpZGVyKCkge1xuICAgIC8vIGNyZWF0ZSBhcnJheSBvZiBwcm9taXNpZmllZCBkYXRhXG4gICAgY29uc3QgcHJtc3MgPSB0aGlzLnRyaWdnZXJzLm1hcCh0cmlnZyA9PiB0cmlnZy5yZXNldFRvSW5pdGlhbCgpKVxuICAgIC8vIG5lZWQgdG8gcmV0dXJuIHByb21pc2VcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAvLyB3YWl0IGJvdGggdHJpZ2dlcnMgdXBkYXRlc1xuICAgICAgUHJvbWlzZS5hbGwocHJtc3MpLnRoZW4ocmVzcCA9PiB7XG4gICAgICAgIC8vIHJldHVybiBkYXRhIHdpdGhvdXQgYWN0aXZlIHRyaWdnZXJcbiAgICAgICAgcmVzb2x2ZSh0aGlzLnJldHVybkRhdGFTZXR1cCgpKVxuICAgICAgfSlcbiAgICB9KVxuICB9XG59IiwiaW1wb3J0ICcuL2luZGV4LnNjc3MnXG5pbXBvcnQgU2xpZGVyIGZyb20gJy4vZWxlbXMvU2xpZGVyJ1xuXG5cbmV4cG9ydCBmdW5jdGlvbiBobVNsaWRlcihwcm9wcykge1xuICBcbiAgcmV0dXJuIG5ldyBTbGlkZXIocHJvcHMpXG5cbn0iXSwic291cmNlUm9vdCI6IiJ9